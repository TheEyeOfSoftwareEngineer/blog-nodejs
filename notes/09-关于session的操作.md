## Session
- cookie可能会暴露隐私的信息
- 解决方案: cookie中存储标识id,server端对应解析进行判断
- session: server端存储用户信息

session相当于是cookie键值对的一层包装,其内容就是通过设置session id类似的标识符在后端中找到对应的cookie值,从而使的cookie中的信息不直接暴露在前后端的数据传输中,其数据格式相当于
```json
"sid" : {
  "xxx": 111,
  "xx": 222
}
```

### 普通设置session的问题
如果session直接是js变量放在nodejs进程内存中
- 进程内存有限，访问量过大，内存暴增
- 正式上线运行是多进程，进程之间内存无法共享
- 解决方案: redis
  - web server最常用的缓存数据库,数据存放在内存中
  - 相比于mysql,访问速度快(内存和硬盘不是一个数量级)
  - 内存储存成本高
  - 将web server和redis拆分为两个单独的服务
  - 双方都是独立的,都是可扩展的(例如都扩展成集群)
  - 包括mysql,也是一个单独的服务,也可扩展

### 为什么redis
- session访问频繁,对性能要求极高
- session可以不考虑断点丢失数据的问题
- session数据量不会太大(相比于mysql中存储的数据)

### 考虑数据存储方式的选择维度
- 操作频率
- 操作特征(以查询为主或者修改为主)
- 数据安全性(断电等情况)
- 数据一致性要求
- 数据量大小
- 存储成本
